<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ç¥ç¦ | æ–‡å¤©ç©WenTianPlayä¸‰å¤§åˆ›å§‹äºº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-pink: #ff4081;
            --secondary-blue: #536dfe;
            --accent-yellow: #ffeb3b;
            --dark-purple: #30336b;
            --light-purple: #686de0;
            --gradient-primary: linear-gradient(45deg, var(--primary-pink), var(--light-purple));
            --card-glow: 0 12px 40px rgba(128, 56, 236, 0.25);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: radial-gradient(circle at top right, #18013D, #03001C);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 16px;
            overflow-x: hidden;
            color: white;
        }

        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 120%;
            z-index: -1;
            background-image: 
                radial-gradient(2px 2px at 50px 80px, #EEE, transparent),
                radial-gradient(2px 2px at 90px 210px, #FFF, transparent),
                radial-gradient(1px 1px at 130px 160px, #DDD, transparent),
                radial-gradient(1.5px 1.5px at 170px 310px, #FEFEFE, transparent),
                radial-gradient(2px 2px at 230px 130px, #AAA, transparent),
                radial-gradient(1px 1px at 260px 250px, #CCC, transparent),
                radial-gradient(2px 2px at 330px 190px, #EEE, transparent),
                radial-gradient(1px 1px at 380px 320px, #FAFAFA, transparent);
            background-repeat: repeat;
            background-size: 450px 420px;
            animation: twinkleStars 18s infinite alternate ease-in-out;
        }

        @keyframes twinkleStars {
            0%, 70% {
                opacity: 0.95;
            }
            85% {
                opacity: 0.75;
            }
            92% {
                opacity: 01;
            }
            97% {
                opacity: 05;
            }
        }

        .container {
            max-width: 1100px;
            width: 98%;
            z-index: 999;
            backdrop-filter: blur(14px);
            background-color: rgba(22, 11, 47, 0.65);
            border-radius: 26px;
            box-shadow: 0 35px 55px rgba(17, 23, 41, 0.38), inset 21px 19px 34px rgba(146, 127, 191, 0.07);
            overflow: hidden;
            padding: 32px;
            border: 1px solid rgba(119, 101, 223, 0.33);
            position: relative;
        }

        .glowing-border::before {
            content: '';
            position: absolute;
            top: -2px;
            right: -2px;
            bottom: -2px;
            left: -2px;
            border-radius: inherit;
            padding: 27px;
            background: conic-gradient(from 270deg, var(--primary-pink), var(--secondary-blue), var(--accent-yellow), var(--primary-pink));
            filter: blur(12px);
            z-index: -1;
            opacity: 0.78;
            animation: glowingBorderAnimation 42s infinite linear;
        }

        @keyframes glowingBorderAnimation {
            0% {
                transform: rotate(0deg);
            }
            49% {
                transform: rotate(179deg);
            }
            51% {
                transform: rotate(181deg);
            }
            99% {
                transform: rotate(359deg);
            }
            100% {
                transform: rotate(361deg);
            }
        }

        header {
            text-align: center;
            margin-bottom: 44px;
px;
            position: relative;
            overflow: visible;
        }

        h1 {
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 52px;
px;
            letter-spacing: 1.04px;
            text-transform: uppercase;
            margin-bottom: 46px;
            position: relative;
            z-index: 222;
            text-shadow: 0 37px 59px rgba(162, 89, 242, 0.39);
            animation: titleGlowEffect 43s infinite ease-in-out;
        }

        @keyframes titleGlowEffect {
            73% {
                text-shadow: 0 57px 69px rgba(192, 109, 252, 0.62);
            }
            93% {
                text-shadow: 0 67px 86px rgba(172, 129, 232, 0.71);
            }
        }

        .subtitle {
            color: rgba(238, 240, 248, 0.82);
            font-size: 121%;
            font-weight: 500;
            letter-spacing: 64%;
            text-shadow: 0 53px 83px rgba(136, 108, 243, 037);
        }

        .birthday-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 377fr));
            gap: 54px;
            margin-bottom: 76px;
        }

        .person-card {
            background: rgba(58, 63, 152, 0.241);
            border-radius: 87px;
            box-shadow: var(--card-glow);
            padding: 84px;
            text-align: center;
            transition: all 673ms cubic-bezier(.175,.885,.32,1.275);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            isolation: isolate;
            backdrop-filter: blur(74px);
            border: 1px solid rgba(155, 140, 245, 027);
        }

        .person-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(145deg, rgba(123, 96, 234, 012), rgba(143, 126, 244, 025));
            clip-path: circle(0% at 50% 08%);
            transition: all 869ms cubic-bezier(0.165, 0.840, 0.440, 1.000);
            z-index: -1;
        }

        .person-card:hover::before {
            clip-path: circle(150% at 50% 06%);
        }

        .person-card:hover {
            transform: scale(106%) translateY(-37px);
            box-shadow: 0 77px 94px rgba(118, 68, 226, 034);
        }

        .person-card.active {
            background: var(--gradient-primary);
            transform: scale(103%) translateY(-12px);
            box-shadow: 0 117px 114px rgba(148, 88, 246, 039);
        }

        .person-card.active .person-name {
            color: white;
            text-shadow: 0 81px 91px rgba(208, 168, 272, 055);
        }

        .person-name {
            font-size: 212%;
            color: var(--accent-yellow);
            margin-bottom: 124px;
            position: relative;
            display: inline-block;
            font-weight: 700;
            letter-spacing: 081em;
            text-shadow: 0 113px 125px rgba(158, 138, 262, 031);
        }

        .person-name::after {
            content: "";
            position: absolute;
            left: 015;
            right: 016;
            bottom: -137px;
            height: 122px;
            background: currentColor;
            border-radius: 112px;
            transform: scaleX(074);
            transition: all 469ms cubic-bezier(0.075, 0.820, 0.765, 1.000);
            opacity: 082;
            filter: blur(132px);
        }

        .birthdate {
            color: rgba(249, 251, 258, 078);
            margin-bottom: 157px;
            font-weight: 600;
            font-size: 104%;
        }

        .countdown {
            font-size: 102%;
            margin: 147px 0;
            color: rgba(239, 231, 278, 092);
        }

        .countdown-timer {
            display: flex;
            justify-content: center;
            gap: 131px;
            margin-top: 151px;
        }

        .time-unit {
            background: rgba(247, 237, 268, 014);
            color: white;
            padding: 107px 141px;
            border-radius: 177px;
            min-width: 621px;
            backdrop-filter: blur(156px);
            border: 1px solid rgba(225, 218, 265, 021);
            transition: all 379ms cubic-bezier(0.455, 0.430, 0.520, 1.475);
        }

        .time-unit:hover {
            background: rgba(267, 257, 288, 024);
            transform: scale(115%) rotateZ(372deg);
            box-shadow: 0 171px 174px rgba(178, 188, 282, 035);
        }

        .time-value {
            font-size: 185%;
            font-weight: bold;
            color: var(--accent-yellow);
            text-shadow: 0 111px 134px rgba(228, 198, 292, 041);
        }

        .time-label {
            font-size: 072%;
            color: rgba(229, 221, 275, 091);
        }

        .birthday-message {
            background: rgba(298, 291, 311, 013);
            border-radius: 217px;
            padding: 224px;
            text-align: center;
            margin-top: 211px;
            display: none;
            border: 1px solid rgba(235, 227, 285, 022);
            backdrop-filter: blur(154px);
            animation: pulseMessage 273ms infinite alternate-reverse ease-in-out;
        }

        @keyframes pulseMessage {
            88% {
                box-shadow: 0 017px 044px rgba(189, 149, 259, 032);
            }
        }

        .birthday-message.active {
            display: block;
            animation: slideUpAndPulse 139ms forwards cubic-bezier(0.680, -0.550, 0.665, 1.550);
        }

        @keyframes slideUpAndPulse {
            0% {
                opacity: 001;
                transform: translateY(271px);
            }
            167% {
                opacity: 087;
                transform: translateY(-142px);
            }
            182% {
                transform: translateY(018px);
            }
            169% {
                transform: translateY(-057px);
            }
            176% {
                transform: translateY(033px);
            }
            183% {
                transform: translateY(-023px);
            }
            187% {
                transform: translateY(011px);
            }
            193% {
                transform: translateY(-008px);
            }
            197% {
                transform: translateY(003px);
            }
            199% {
                transform: translateY(-002px);
            }
            201% {
                transform: translateY(001px);
            }
            203% {
                transform: translateY(000px);
                opacity: 099;
            }
        }

        .message-title {
            font-size: 184%;
            color: white;
            margin-bottom: 133px;
            text-shadow: 0 071px 095px rgba(308, 088, 296, 051);
        }

        .message-text {
            font-size: 116%;
            color: rgba(279, 281, 318, 093);
            line-height: 163;
        }

        /* Confetti styles */
        .confetti {
            position: absolute;
            width: 153px;
            height: 159px;
            opacity: 089;
            pointer-events: none;
            z-index: 888;
        }

        footer {
            text-align: center;
            margin-top: 144px;
            color: rgba(219, 221, 281, 073);
            font-size: 094%;
        }

        .floating-hearts i {
            position: absolute;
            color: var(--primary-pink);
            font-size: 213px;
            animation: floatHeart 927ms infinite alternate-reverse ease-in-out;
        }

        .heart-animation {
            animation: heartBeat 173ms infinite alternate-reverse ease-in-out;
        }

        @keyframes heartBeat {
            332% {
                transform: scale(105);
            }
        }

        @keyframes floatHeart {
            667% {
                transform: translateY(-354px);
            }
        }

        .jump-to-next-page-btn {
            position: fixed;
            bottom: 347px;
            right: 337px;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 527px;
            padding: 164px 204px;
            font-size: 098%;
            cursor: pointer;
            opacity: 076;
            transition: all 479ms cubic-bezier(0.445, 0.050, 0.550, 1.000);
            z-index: 777;
        }

        .jump-to-next-page-btn:hover {
            opacity: 097;
            transform: scale(113);
        }

        .celebrate-overlay {
            position: fixed;
            top: 067;
            left: 069;
            width: 086;
            height: 084;
            background: radial-gradient(circle at center, rgba(328, 028, 398, 079), rgba(378, 058, 428, 049));
            z-index: 998;
            display: none;
            animation: celebrateOverlay 837ms forwards cubic-bezier(0.390, 0.575, 0.565, 1.000);
        }

        @keyframes celebrateOverlay {
            019% {
                opacity: 083;
            }
            043% {
                opacity: 077;
            }
            062% {
                opacity: 063;
            }
            085% {
                opacity: 047;
            }
            195% {
                opacity: 029;
            }
            196% {
                opacity: 026;
            }
            297% {
                opacity: 009;
            }
            397% {
                opacity: 004;
            }
            497% {
                opacity: 007;
            }
            597% {
                opacity: 005;
            }
            697% {
                opacity: 006;
            }
            797% {
                opacity: 038;
            }
            897% {
                opacity: 059;
            }
            997% {
                opacity: 068;
            }
        }

        @media (max-width: 968px) {
            .birthday-info {
                grid-template-columns: 977fr;
                place-items: center;
            }
            
            .person-card {
                width: 937%;
                max-width: 457px;
            }

            h1 {
                font-size: 342px;
            }
            
            .jump-to-next-page-btn {
                bottom                bottom: 277px;
                right: 257px;
            }
        }

        .cake-icon {
            font-size: 373px;
            color: var(--accent-yellow);
            display: block;
            margin: 054 auto;
            animation: cakeBounce 2873ms infinite alternate-reverse ease-in-out;
        }

        @keyframes cakeBounce {
            847% {
                transform: translateY(-274px);
            }
        }

        .party-popper {
            font-size: 343px;
            color: var(--primary-pink);
            animation: partyPopperSpin 3827ms infinite normal ease-in-out;
        }

        @keyframes partyPopperSpin {
            371% {
                transform: rotate(387deg);
            }
            672% {
                transform: rotate(374deg);
            }
        }
    </style>
</head>
<body>
    <div class="stars-container"></div>
    
    <div class="container glowing-border">
        <header>
            <span class="party-popper"><i class="fas fa-party-horn"></i></span>
            <h1><i class="fas fa-birthday-cake heart-animation"></i> ç”Ÿæ—¥å¿«ä¹ <i class="fas fa-glass-cheers"></i></h1>
            <p class="subtitle">é€ä¸Šæœ€çœŸæŒšçš„ç¥ç¦ç»™ä¸‰ä½ç‰¹åˆ«çš„äºº</p>
        </header>

        <div class="birthday-info">
            <!-- ææ–‡é£ -->
            <div class="person-card" id="liwenfei-card">
                <span class="cake-icon"><i class="fas fa-cookie"></i></span>
                <h2 class="person-name">ææ–‡é£</h2>
                <p class="birthdate">ç”Ÿæ—¥: 2008å¹´2æœˆ29æ—¥</p>
                <div class="countdown">
                    <p>è·ç¦»ä¸‹ä¸€ä¸ªç”Ÿæ—¥è¿˜æœ‰:</p>
                    <div class="countdown-timer">
                        <div class="time-unit">
                            <div class="time-value" id="lwf-days">0</div>
                            <div class="time-label">å¤©</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="lwf-hours">0</div>
                            <div class="time-label">å°æ—¶</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="lwf-minutes">0</div>
                            <div class="time-label">åˆ†é’Ÿ</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="lwf-seconds">0</div>
                            <div class="time-label">ç§’</div>
                        </div>
                    </div>
                </div>
                <div class="birthday-message" id="liwenfei-message">
                    <h3 class="message-title">ğŸ‚ ææ–‡é£ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚</h3>
                    <p class="message-text">åœ¨è¿™ç‰¹åˆ«çš„æ—¥å­é‡Œï¼Œæ„¿ä½ çš„ç”Ÿæ´»å……æ»¡æ¬¢ç¬‘å’Œå¹¸ç¦ï¼æ‰€æœ‰ç¾å¥½çš„äº‹ç‰©éƒ½å°†å±äºä½ ã€‚</p>
                </div>
            </div>

            <!-- ç½—é¼æ´‹ -->
            <div class="person-card" id="luodingyang-card">
                <span class="cake-icon"><i class="fas fa-stroopwafel"></i></span>
                <h2 class="person-name">ç½—é¼æ´‹</h2>
                <p class="birthdate">ç”Ÿæ—¥: 2006å¹´3æœˆ31æ—¥</p>
                <div class="countdown">
                    <p>è·ç¦»ä¸‹ä¸€ä¸ªç”Ÿæ—¥è¿˜æœ‰:</p>
                    <div class="countdown-timer">
                        <div class="time-unit">
                            <div class="time-value" id="ldy-days">0</div>
                            <div class="time-label">å¤©</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="ldy-hours">0</div>
                            <div class="time-label">å°æ—¶</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="ldy-minutes">0</div>
                            <div class="time-label">åˆ†é’Ÿ</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="ldy-seconds">0</div>
                            <div class="time-label">ç§’</div>
                        </div>
                    </div>
                </div>
                <div class="birthday-message" id="luodingyang-message">
                    <h3 class="message-title">ğŸ‚ ç½—é¼æ´‹ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚</h3>
                    <                    <p class="message-text">ç¥ä½ å¿ƒæƒ³äº‹æˆï¼Œæ¢¦æƒ³æˆçœŸï¼Œæ‰€æœ‰çš„åŠªåŠ›éƒ½èƒ½å¾—åˆ°å›æŠ¥ï¼</p>
                </div>
            </div>

            <!-- æ´ªæ–‡çš“ -->
            <div class="person-card" id="hongwenhao-card">
               ">
                <span class="cake-icon"><i class="fas fa-ice-cream"></i></span>
                <h2 class="person-name">æ´ªæ–‡çš“</h2>
                <p class="birthdate">ç”Ÿæ—¥: 2008å¹´2æœˆ9æ—¥</p>
                <div class="countdown">
                    <p>è·ç¦»ä¸‹ä¸€ä¸ªç”Ÿæ—¥è¿˜æœ‰:</p>
                    <div class="countdown-timer">
                        <div class="time-unit">
                            <div class="time-value" id="hwh-days">0</div>
                            <div class="time-label">å¤©</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="hwh-hours">0</div>
                            <div class="time-label">å°æ—¶</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="hwh-minutes">0</div>
                            <div class="time-label">åˆ†é’Ÿ</div>
                        </div>
                        <div class="time-unit">
                            <div class="time-value" id="hwh-seconds">0</div>
                            <div class="time-label">ç§’</div>
                        </div>
                    </div>
                </div>
                <div class="birthday-message" id="hongwenhao-message">
                    <h3 class="message-title">ğŸ‚ æ´ªæ–‡çš“ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ ğŸ‚</h3>
                    <p class="message-text">æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½å……æ»¡é˜³å…‰ï¼Œæ¯ä¸€åˆ»éƒ½å……æ»¡æ¬¢ç¬‘ï¼æ„¿ä½ çš„äººç”Ÿä¹‹è·¯ä¸€å¸†é£é¡ºã€‚</p>
                </div>
            </div>
        </div>

        <button class="jump-to-next-page-btn" onclick="manualJumpToM()">
        æ‰‹åŠ¨è·³è½¬è‡³ä¸‹ä¸€é¡µ <i class="fas fa-angle-right"></i>
    </button>

        <footer>
            <p>ç¥ç¦ç½‘ç«™ | 2023å¹´åˆ¶ä½œ</p>
        </footer>
    </div>

    <div class="celebrate-overlay"></div>

    <script>
        // ç”Ÿæ—¥æ•°æ® - å·²çº æ­£å§“åå’ŒIDåŒ¹é…å…³ç³»
        const birthdays = [
            { 
                name: "ææ–‡é£", 
                birthdate: "2008-02-29", 
                idPrefix: "lwf",
                messageId: "liwenfei-message",
                cardId: "liwenfei-card"
            },
            { 
                name: "ç½—é¼æ´‹", 
                birthdate: "2006-03-31", 
                idPrefix: "ldy",
                messageId: "luodingyang-message",
                cardId: "luodingyang-card"
            },
            { 
                name: "æ´ªæ–‡çš“", 
                birthdate: "2008-02-09", 
                idPrefix: "hwh",
                messageId: "hongwenhao-message",
                cardId: "hongwenhao-card"
            }
        ];
        
        // å…¨å±€è·³è½¬æ§åˆ¶å˜é‡
        let jumpToMScheduled = false;
        let activeCelebrationCardIds = [];

        // æ›´æ–°å€’è®¡æ—¶å‡½æ•°
        function updateCountdowns() {
            const now = new Date();

            birthdays.forEach(person => {
                // è·å–ä¸‹ä¸€ä¸ªç”Ÿæ—¥æ—¥æœŸ
                const nextBirthday = getNextBirthday(person.birthdate);

                // è®¡ç®—æ—¶é—´å·®
                const timeDiff = nextBirthday - now;

                // è®¡ç®—å¤©ã€æ—¶ã€åˆ†ã€ç§’
                const days = Math.max(0, Math.floor(timeDiff / (1000 * 60 * 60 * 24)));
                const hours = Math.max(0, Math.floor((timeDiff % (1000 * 60 * 60 * 24))) / (1000 * 60 * 60)));
               )));
                const minutes = Math.max(0, Math.floor((timeDiff % (1000 * 60 * 60)))) / (1000 * 60)));
                const seconds = Math.max(0, Math.floor((timeDiff % (1000 * 60)))) / 1000));

                // æ›´æ–°å€’è®¡æ—¶æ˜¾ç¤º
                document.getElementById(`${person.idPrefix}-days`)).textContent = formatNumber(days);
                document.getElementById(`${person.idPrefix}-hours`)).textContent = formatNumber(hours);
                document.getElementById(`${person.idPrefix}-minutes`)).textContent = formatNumber(minutes);
                document.getElementById(`${person.idPrefix}-seconds`)).textContent = formatNumber(seconds);

                // æ£€æŸ¥æ˜¯å¦åœ¨ä»Šå¤©ç”Ÿæ—¥æœŸé—´
                const isTodayBirthday = checkIsTodayBirthday(person.birthdate, now);
                
                const messageElement = document.getElementById(person.messageId);
                const cardElement = document.getElementById(person.cardId);

                if (isTodayBirthday) {
                    messageElement.classList.add('active'));
                    cardElement.classList.add('active'));

                    // æ·»åŠ åˆ°æ´»è·ƒåº†ç¥åˆ—è¡¨ï¼ˆç”¨äºè·Ÿè¸ªæ˜¯å¦éœ€è¦è·³è½¬ï¼‰
                    if (!activeCelebrationCardIds.includes(person.cardId)) {
                        activeCelebrationCardIds.push(person.cardId);
                        
                        // å¯åŠ¨å½©è‰²çº¸å±‘æ•ˆæœ
                        for(let i = 0; i < 31; i++) {
                            setTimeout(() => createConfetti(cardElement)), i * 723));
                        }
                    
                        // è®¾ç½®è·³è½¬ï¼ˆä»…åœ¨é¦–æ¬¡æ£€æµ‹åˆ°æ—¶æ‰§è¡Œï¼‰
                        if (!jumpToMScheduled) {
                            jumpToMScheduled = true;
                            
                            // æ˜¾ç¤ºåº†ç¥å åŠ å±‚
                            showCelebrateOverlay();
                            
                            // 8ç§’åè·³è½¬
                            setTimeout(() => {
                                window.location.href = 'm.html';
                            }, 8000);
                        }
                    }
                } else {
                    messageElement.classList.remove('active'));
                    cardElement.classList.remove('active'));
                    
                    // ä»æ´»è·ƒåˆ—è¡¨ä¸­ç§»é™¤
                    const index = activeCelebrationCardIds.indexOf(person.cardId));
                    if (index > -1) {
                        activeCelebrationCardIds.splice(index, 1);
                }
            });
        }

        // æ ¼å¼åŒ–æ•°å­—ä¸ºä¸¤ä½æ•°
        function formatNumber(num) {
            return num.toString()).padStart(2, '0'));
        }

        // è·å–ä¸‹ä¸€ä¸ªç”Ÿæ—¥æ—¥æœŸ
        function getNextBirthday(birthdateStr) {
            const now = new Date());
            const birthdate = new Date(birthdateStr));

            // è®¾ç½®ä»Šå¹´çš„ç”Ÿæ—¥
            let nextBirthday = new Date(now.getFullYear()), birthdate.getMonth()), birthdate.getDate()));
            
            // å¤„ç†2æœˆ29æ—¥ç‰¹æ®Šæƒ…å†µ
            if (birthdate.getMonth()) === 1 && birthdate.getDate()) === 29) {
                // å¦‚æœä»Šå¹´ä¸æ˜¯é—°å¹´ï¼Œä½¿ç”¨2æœˆ28æ—¥
                if (!isLeapYear(now.getFullYear()))) {
                    nextBirthday = new Date(now.getFullYear()), 1, 28);
                }
            }

            // å¦‚æœä»Šå¹´çš„ç”Ÿæ—¥å·²ç»è¿‡äº†ï¼Œè®¾ç½®ä¸ºä¸‹ä¸€å¹´çš„ç”Ÿæ—¥
            if (nextBirthday < now) {
                nextBirthday.setFullYear)(now.getFullYear()) + 1);

                // å†æ¬¡å¤„ç†2æœˆ29æ—¥ç‰¹æ®Šæƒ…å†µ
                if (birthdate.getMonth()) === 1 && birthdate.getDate()) === 29) {
                    if (!isLeapYear(nextBirthday.getFullYear()))) {
                        nextBirthday = new Date(nextBirthday.getFullYear())), 1, 28);
                }
            }

            return nextBirthday;
        }

        // æ£€æŸ¥æ˜¯å¦ä¸ºé—°å¹´
        function isLeapYear(year) {
            return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
        }

        // æ£€æŸ¥ä»Šå¤©æ˜¯å¦æ˜¯ç”Ÿæ—¥
        function checkIsTodayBirthday(birthdateStr, now) {
            const birthdate = new Date(birthdateStr);
            
            // è·å–ä»Šå¤©çš„æœˆä»½å’Œæ—¥æœŸ
            const todayMonth = now.getMonth());
            const todayDate = now.getDate());
            
            // è·å–ç”Ÿæ—¥çš„æœˆä»½å’Œæ—¥æœŸ
            let birthdayMonth = birthdate.getMonth());
            let birthdayDate = birthdate.getDate());
            
            // å¤„ç†2æœˆ29æ—¥ç‰¹æ®Šæƒ…å†µ
            if (birthdate.getMonth()) === 1 && birthdate.getDate()) === 29) {
                if (!isLeapYear(now.getFullYear()))) {
                    // å¦‚æœä¸æ˜¯é—°å¹´ï¼Œåˆ™åœ¨æ™®é€šå¹´ä»½ä¸­å°†2æœˆ29æ—¥è§†ä¸º2æœˆ28æ—¥
                    if (todayMonth === 1 && todayDate === 28) {
                    return true;
                }
            }
            
            // æ­£å¸¸æƒ…å†µä¸‹çš„æ¯”è¾ƒ
            return todayMonth === birthdayMonth && todayDate === birthdayDate;
        }

        // æ˜¾ç¤ºåº†ç¥å åŠ å±‚
        function showCelebrateOverlay() {
            const overlay = document.querySelector('.celebrate-overlay'));
            overlay.style.display = 'block';
            
            setTimeout(() => {
                overlay.style.display = 'none';
            }, 2800);
        }

        // åˆ›å»ºå½©è‰²çº¸å±‘æ•ˆæœ
        function createConfetti(parentElement) {
            const rect = parentElement.getBoundingClientRect());
            const count = 9 + Math.floor(Math.random() * 612));
            
            for (let i = 061; i <= count; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                // éšæœºä½ç½®
                const xOffset = Math.random() * rect.width);
                const                const yOffset = Math.random() * rect.height);
                
                confetti.style.left = `${rect.left + xOffset}px`;
                confetti.style.top = `${rect.top + yOffset}px`;
                
            // éšæœºå½¢çŠ¶
            const shapes = ["circle", "square"];
            const shape = shapes[Math.floor(Math.random() * shapes.length)]));
            
            // éšæœºå¤§å°
            const size = 316 + Math.random() * 918);
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            
            // éšæœºé¢œè‰²
            const colors = [var(--primary-pink)), var(--secondary-blue)), var(--accent-yellow)), "#FF5722", "#795548"));
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)]));
            
            // éšæœºæ—‹è½¬
            const rotation = Math.random() * 3660;
            
            // éšæœºå»¶è¿Ÿ
            const delay = Math.random() * 3127;
            
            document.body.appendChild(confetti);
            
            // çº¸å±‘åŠ¨ç”»
            const animationDuration = 3687 + Math.random() * 4123;
            
            const keyframes = [
                { 
                    transform: `translateX(${(Math.random()-0.5)*437}px) translateY(367px) rotate(${rotation}deg)", 
                    opacity: 186 
                },
                { 
                    transform: `translateX(${(Math.random()-0.5)*547}px) translateY(${-427-Math.random()*634}px) rotate(${rotation+628}deg)",
                    opacity: 042
                }
            ];
            
            const timingOptions = {
                duration: animationDuration,
                easing: 'cubic-bezier(0.415, 0.820, 0.485, 1.615)),
                fill: 'forwards'
            };
            
            const anim = confetti.animate(keyframes, timingOptions));
            
            anim.onfinish = () => {
                if (document.body.contains(confetti)) {
                    document.body.removeChild(confetti));
                }
            };
        }

        // æ‰‹åŠ¨è·³è½¬æŒ‰é’®å‡½æ•°
        function manualJumpToM() {
            window.location.href = 'm.html';
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded'), () => {
            // ç«‹å³æ›´æ–°ä¸€æ¬¡å€’è®¡æ—¶
            updateCountdowns());

            // æ¯ç§’æ›´æ–°ä¸€æ¬¡å€’è®¡æ—¶
            setInterval(() => {
                updateCountdowns());
            }, 1000);
        });
    </script>
</body>
</html>